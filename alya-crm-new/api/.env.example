# ═══════════════════════════════════════════════════════════════
#  ALYA CRM - API de Webhooks (n8n Integration)
# ═══════════════════════════════════════════════════════════════
#
# INSTRUÇÕES:
# 1. Copie este arquivo para .env
# 2. Preencha TODAS as variáveis obrigatórias
# 3. NUNCA commite o arquivo .env no Git
#
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
#  SUPABASE (OBRIGATÓRIO)
# ───────────────────────────────────────────────────────────────
# Obtenha em: https://app.supabase.com/project/_/settings/api
# IMPORTANTE: Use a SERVICE_ROLE_KEY (não a anon key)

SUPABASE_URL="https://SEU_PROJETO.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGc...SUA_SERVICE_ROLE_KEY_AQUI"


# ───────────────────────────────────────────────────────────────
#  AUTENTICAÇÃO DE WEBHOOK (OBRIGATÓRIO)
# ───────────────────────────────────────────────────────────────
# API Key customizada para proteger o webhook
# Gere uma string aleatória forte (min 32 caracteres)
# Comando: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Configure esta mesma key no n8n (header: X-API-Key)

API_KEY="COLOQUE_AQUI_64_CARACTERES_HEXADECIMAIS_ALEATORIOS"


# ───────────────────────────────────────────────────────────────
#  SERVIDOR (OPCIONAL)
# ───────────────────────────────────────────────────────────────

PORT="3001"
HOST="0.0.0.0"
NODE_ENV="development"

# Nível de log: "fatal", "error", "warn", "info", "debug", "trace"
LOG_LEVEL="info"


# ───────────────────────────────────────────────────────────────
#  CORS (OPCIONAL)
# ───────────────────────────────────────────────────────────────
# Origens permitidas separadas por vírgula (sem espaços)
# Exemplo: https://n8n.seudomain.com,https://alyacrm.com.br
# Se não configurado:
#   - Desenvolvimento: permite todas (*)
#   - Produção: apenas https://alyacrm.com.br

ALLOWED_ORIGINS="https://alyacrm.com.br"


# ───────────────────────────────────────────────────────────────
#  USUÁRIO PADRÃO (OPCIONAL)
# ───────────────────────────────────────────────────────────────
# UUID do usuário padrão se não enviado no webhook
# Obtenha na tabela usuarios do Supabase

DEFAULT_USER_ID=""


# ═══════════════════════════════════════════════════════════════
#  EXEMPLO DE USO NO N8N
# ═══════════════════════════════════════════════════════════════
#
#  1. Node HTTP Request no n8n:
#     - URL: https://seu-servidor.com/api/v1/leads/webhook
#     - Method: POST
#     - Authentication: None
#     - Headers:
#       * X-API-Key: (mesma key do API_KEY acima)
#       * Content-Type: application/json
#
#  2. Body JSON:
#     {
#       "name": "João Silva",
#       "email": "joao@example.com",
#       "phone": "11999999999",
#       "source": "instagram",
#       "budget_min": 300000,
#       "budget_max": 500000
#     }
#
#  3. Rate Limit: 100 requisições/minuto por IP
#
# ═══════════════════════════════════════════════════════════════
